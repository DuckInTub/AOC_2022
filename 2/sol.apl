d ← ⊃⎕NGET 'input.txt' 1
d ← 3|~∘6¨(1-⍨'ABCXYZ'⍳⊢)¨d

win ← {⍺=⍵ : 1 ⋄ ⍺=3|⍵+1: 0 ⋄ 1}
+/((1+⊃∘⌽)+3×win/)¨d


pick ← {⍵=1: ⍺ ⋄ ⍵=0: 3|⍺-1 ⋄ ⍵=2: 3|⍺+1}
+/((1+pick/)+3×⊃∘⌽)¨d